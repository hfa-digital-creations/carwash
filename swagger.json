{
  "openapi": "3.0.0",
  "info": {
    "title": "SparkleWash API Documentation",
    "description": "Complete API documentation for Customer, Admin, and Partner modules with authentication and role-based access control",
    "version": "1.0.0",
    "contact": {
      "name": "API Support",
      "email": "support@sparklewash.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:7000",
      "description": "Development server"
    },
    {
      "url": "https://api.sparklewash.com/api",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Customer",
      "description": "Customer registration, authentication, and profile management"
    },
    {
      "name": "Admin",
      "description": "Admin authentication and management"
    },
    {
      "name": "Partner",
      "description": "Partner registration, authentication, and management (4 roles)"
    }
  ],
  "paths": {
    "/customer/registerUser": {
      "post": {
        "tags": [
          "Customer"
        ],
        "summary": "Step 1: Register customer and send OTP",
        "description": "Sends OTP via SMS to phone number for verification",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "fullName",
                  "email",
                  "phoneNumber",
                  "password",
                  "confirmPassword"
                ],
                "properties": {
                  "fullName": {
                    "type": "string",
                    "example": "John Doe"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "john@example.com"
                  },
                  "phoneNumber": {
                    "type": "string",
                    "example": "+917397695334"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6,
                    "example": "password123"
                  },
                  "confirmPassword": {
                    "type": "string",
                    "example": "password123"
                  },
                  "referredBy": {
                    "type": "string",
                    "description": "Optional referral code",
                    "example": "ABC123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "OTP sent to your phone number ✅"
                    },
                    "phoneNumber": {
                      "type": "string",
                      "example": "+917397695334"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error or user already exists"
          },
          "500": {
            "description": "Failed to send OTP"
          }
        }
      }
    },
    "/customer/verifyOTP": {
      "post": {
        "tags": [
          "Customer"
        ],
        "summary": "Step 2: Verify OTP and create account",
        "description": "Verifies OTP and creates customer account with tokens",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "phoneNumber",
                  "otp"
                ],
                "properties": {
                  "phoneNumber": {
                    "type": "string",
                    "example": "+917397695334"
                  },
                  "otp": {
                    "type": "string",
                    "example": "1234"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomerAuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid OTP or session expired"
          }
        }
      }
    },
    "/customer/login": {
      "post": {
        "tags": [
          "Customer"
        ],
        "summary": "Customer login",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "emailOrPhone",
                  "password"
                ],
                "properties": {
                  "emailOrPhone": {
                    "type": "string",
                    "example": "john@example.com"
                  },
                  "password": {
                    "type": "string",
                    "example": "password123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomerAuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Incorrect password"
          },
          "404": {
            "description": "User not found"
          }
        }
      }
    },
    "/customer/forgotPassword": {
      "post": {
        "tags": [
          "Customer"
        ],
        "summary": "Step 1: Request password reset OTP",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "emailOrPhone"
                ],
                "properties": {
                  "emailOrPhone": {
                    "type": "string",
                    "example": "john@example.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP sent successfully"
          },
          "404": {
            "description": "User not found"
          }
        }
      }
    },
    "/customer/verifyResetOTP": {
      "post": {
        "tags": [
          "Customer"
        ],
        "summary": "Step 2: Verify password reset OTP",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "emailOrPhone",
                  "otp"
                ],
                "properties": {
                  "emailOrPhone": {
                    "type": "string",
                    "example": "john@example.com"
                  },
                  "otp": {
                    "type": "string",
                    "example": "1234"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP verified successfully"
          },
          "400": {
            "description": "Invalid or expired OTP"
          }
        }
      }
    },
    "/customer/resetPassword": {
      "post": {
        "tags": [
          "Customer"
        ],
        "summary": "Step 3: Reset password",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "emailOrPhone",
                  "newPassword",
                  "confirmPassword"
                ],
                "properties": {
                  "emailOrPhone": {
                    "type": "string",
                    "example": "john@example.com"
                  },
                  "newPassword": {
                    "type": "string",
                    "minLength": 6,
                    "example": "newpass123"
                  },
                  "confirmPassword": {
                    "type": "string",
                    "example": "newpass123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset successfully"
          },
          "400": {
            "description": "Passwords do not match or session expired"
          }
        }
      }
    },
    "/customer/getAllUsers": {
      "get": {
        "tags": [
          "Customer"
        ],
        "summary": "Get all customers",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Users fetched successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "count": {
                      "type": "integer"
                    },
                    "users": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Customer"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/customer/getUserById/{id}": {
      "get": {
        "tags": [
          "Customer"
        ],
        "summary": "Get customer by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User fetched successfully"
          },
          "404": {
            "description": "User not found"
          }
        }
      }
    },
    "/customer/updateProfile/{id}": {
      "put": {
        "tags": [
          "Customer"
        ],
        "summary": "Update customer profile",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "fullName": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "phoneNumber": {
                    "type": "string"
                  },
                  "street": {
                    "type": "string"
                  },
                  "city": {
                    "type": "string"
                  },
                  "pincode": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully"
          }
        }
      }
    },
    "/customer/deleteUser/{id}": {
      "delete": {
        "tags": [
          "Customer"
        ],
        "summary": "Delete customer",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User deleted successfully"
          },
          "404": {
            "description": "User not found"
          }
        }
      }
    },
    "/admin/login": {
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Admin login",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "admin@example.com"
                  },
                  "password": {
                    "type": "string",
                    "example": "admin123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminAuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Incorrect password"
          },
          "403": {
            "description": "Account deactivated"
          },
          "404": {
            "description": "Admin not found"
          }
        }
      }
    },
    "/admin/register": {
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Register new admin (SuperAdmin only)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "fullName",
                  "email",
                  "password"
                ],
                "properties": {
                  "fullName": {
                    "type": "string",
                    "example": "Admin User"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "newadmin@example.com"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6,
                    "example": "admin123"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "admin",
                      "superadmin"
                    ],
                    "example": "admin"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Admin created successfully"
          },
          "400": {
            "description": "Email already exists"
          },
          "403": {
            "description": "Only SuperAdmin can create SuperAdmin"
          }
        }
      }
    },
    "/admin/profile": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Get admin profile",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Profile fetched successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Admin"
                }
              }
            }
          }
        }
      }
    },
    "/admin/change-password": {
      "put": {
        "tags": [
          "Admin"
        ],
        "summary": "Change admin password",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "currentPassword",
                  "newPassword"
                ],
                "properties": {
                  "currentPassword": {
                    "type": "string",
                    "example": "oldpass123"
                  },
                  "newPassword": {
                    "type": "string",
                    "minLength": 6,
                    "example": "newpass123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password changed successfully"
          },
          "400": {
            "description": "Current password incorrect"
          }
        }
      }
    },
    "/admin/getAllAdmins": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Get all admins (SuperAdmin only)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Admins fetched successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "count": {
                      "type": "integer"
                    },
                    "admins": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Admin"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/deleteAdmin/{id}": {
      "delete": {
        "tags": [
          "Admin"
        ],
        "summary": "Delete admin (SuperAdmin only)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Admin deleted successfully"
          },
          "400": {
            "description": "Cannot delete self"
          },
          "404": {
            "description": "Admin not found"
          }
        }
      }
    },
    "/partner/register": {
      "post": {
        "tags": [
          "Partner"
        ],
        "summary": "Step 1: Register partner and send OTP",
        "description": "Sends OTP via SMS for partner registration",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "fullName",
                  "email",
                  "phoneNumber",
                  "password",
                  "confirmPassword",
                  "role"
                ],
                "properties": {
                  "fullName": {
                    "type": "string",
                    "example": "Alex Thompson"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "alex@example.com"
                  },
                  "phoneNumber": {
                    "type": "string",
                    "example": "+917397695334"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6,
                    "example": "password123"
                  },
                  "confirmPassword": {
                    "type": "string",
                    "example": "password123"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "Washing Personnel",
                      "Delivery Person",
                      "Repair Service Technician",
                      "Product Seller"
                    ],
                    "example": "Washing Personnel"
                  },
                  "dateOfBirth": {
                    "type": "string",
                    "format": "date",
                    "example": "1990-05-15"
                  },
                  "gender": {
                    "type": "string",
                    "enum": [
                      "Male",
                      "Female",
                      "Other"
                    ],
                    "example": "Male"
                  },
                  "referredBy": {
                    "type": "string",
                    "example": "ABC123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "OTP sent to your phone number ✅"
                    },
                    "phoneNumber": {
                      "type": "string",
                      "example": "+917397695334"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error or partner already exists"
          }
        }
      }
    },
    "/partner/verifyRegistrationOTP": {
      "post": {
        "tags": [
          "Partner"
        ],
        "summary": "Step 2: Verify OTP and create partner account",
        "description": "Verifies OTP and creates partner account with basic info. Returns tokens to complete profile.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "phoneNumber",
                  "otp"
                ],
                "properties": {
                  "phoneNumber": {
                    "type": "string",
                    "example": "+917397695334"
                  },
                  "otp": {
                    "type": "string",
                    "example": "1234"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Partner registered successfully, use tokens to complete profile",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Registration successful! ✅ Please complete your profile."
                    },
                    "partner": {
                      "$ref": "#/components/schemas/Partner"
                    },
                    "customToken": {
                      "type": "string",
                      "description": "Firebase custom token"
                    },
                    "accessToken": {
                      "type": "string",
                      "description": "Use this token in Authorization header for completeProfile"
                    },
                    "refreshToken": {
                      "type": "string"
                    },
                    "nextStep": {
                      "type": "string",
                      "example": "Complete your profile with address, vehicle/shop, and payout details"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid OTP or session expired"
          }
        }
      }
    },
    "/partner/completeProfile/{id}": {
      "put": {
        "tags": [
          "Partner"
        ],
        "summary": "Step 3: Complete partner profile",
        "description": "Complete profile after registration. Requires authentication token from Step 2.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Partner ID from registration response",
            "schema": {
              "type": "string",
              "example": "507f1f77bcf86cd799439011"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PartnerProfileUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile completed successfully, pending admin approval",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Profile completed successfully! ✅ Your account is pending admin approval."
                    },
                    "partner": {
                      "$ref": "#/components/schemas/Partner"
                    },
                    "note": {
                      "type": "string",
                      "example": "You can login after admin approval"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing token"
          },
          "404": {
            "description": "Partner not found"
          }
        }
      }
    },
    "/partner/login": {
      "post": {
        "tags": [
          "Partner"
        ],
        "summary": "Partner login",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "emailOrPhone",
                  "password"
                ],
                "properties": {
                  "emailOrPhone": {
                    "type": "string",
                    "example": "alex@example.com"
                  },
                  "password": {
                    "type": "string",
                    "example": "password123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PartnerAuthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/partner/logout": {
      "post": {
        "tags": [
          "Partner"
        ],
        "summary": "Logout partner and blacklist token",
        "description": "Invalidates the current access token and optional refresh token by adding them to a blacklist",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "refreshToken": {
                    "type": "string",
                    "description": "Optional: Refresh token to blacklist",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Logout successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Logout successful ✅"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "No token provided"
          },
          "401": {
            "description": "Invalid or expired token"
          }
        }
      }
    },
    "/partner/forgotPassword": {
      "post": {
        "tags": [
          "Partner"
        ],
        "summary": "Step 1: Request password reset OTP",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "emailOrPhone"
                ],
                "properties": {
                  "emailOrPhone": {
                    "type": "string",
                    "example": "alex@example.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP sent successfully"
          },
          "404": {
            "description": "Partner not found"
          }
        }
      }
    },
    "/partner/verifyResetOTP": {
      "post": {
        "tags": [
          "Partner"
        ],
        "summary": "Step 2: Verify password reset OTP",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "emailOrPhone",
                  "otp"
                ],
                "properties": {
                  "emailOrPhone": {
                    "type": "string"
                  },
                  "otp": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP verified successfully"
          }
        }
      }
    },
    "/partner/resetPassword": {
      "post": {
        "tags": [
          "Partner"
        ],
        "summary": "Step 3: Reset password",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "emailOrPhone",
                  "newPassword",
                  "confirmPassword"
                ],
                "properties": {
                  "emailOrPhone": {
                    "type": "string"
                  },
                  "newPassword": {
                    "type": "string",
                    "minLength": 6
                  },
                  "confirmPassword": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset successfully"
          }
        }
      }
    },
    "/partner/getAll": {
      "get": {
        "tags": [
          "Partner"
        ],
        "summary": "Get all partners",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "role",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "Washing Personnel",
                "Delivery Person",
                "Repair Service Technician",
                "Product Seller"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Partners fetched successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "count": {
                      "type": "integer"
                    },
                    "partners": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Partner"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/partner/toggleStatus/{id}": {
      "patch": {
        "tags": [
          "Partner"
        ],
        "summary": "Activate/Deactivate partner (Admin)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "isActive"
                ],
                "properties": {
                  "isActive": {
                    "type": "boolean",
                    "example": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Partner status updated"
          }
        }
      }
    },
    "/partner/getById/{id}": {
      "get": {
        "tags": [
          "Partner"
        ],
        "summary": "Get partner by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Partner MongoDB ObjectId",
            "schema": {
              "type": "string",
              "example": "507f1f77bcf86cd799439011"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Partner fetched successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Partner fetched successfully"
                    },
                    "partner": {
                      "$ref": "#/components/schemas/Partner"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID format"
          },
          "404": {
            "description": "Partner not found"
          }
        }
      }
    },
    "/partner/updateProfile/{id}": {
      "put": {
        "tags": [
          "Partner"
        ],
        "summary": "Update partner profile (for editing existing profile)",
        "description": "Use this to update any field except password and role",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Partner MongoDB ObjectId",
            "schema": {
              "type": "string",
              "example": "507f1f77bcf86cd799439011"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PartnerProfileUpdate"
              },
              "examples": {
                "updateAddress": {
                  "summary": "Update address only",
                  "value": {
                    "address": {
                      "street": "New Street",
                      "city": "Chennai",
                      "state": "Tamil Nadu",
                      "postalCode": "600001",
                      "country": "India",
                      "location": {
                        "coordinates": [
                          80.2707,
                          13.0827
                        ]
                      }
                    }
                  }
                },
                "addService": {
                  "summary": "Add new service (Technician)",
                  "value": {
                    "services": [
                      {
                        "serviceImage": "uploads/new_service.jpg",
                        "serviceName": "Tire Replacement",
                        "description": "Complete tire change service",
                        "minPrice": 500,
                        "maxPrice": 3000
                      }
                    ]
                  }
                },
                "updatePayout": {
                  "summary": "Update payout details",
                  "value": {
                    "payoutDetails": {
                      "accountHolderName": "John Doe",
                      "accountNumber": "1234567890",
                      "ifscCode": "ICIC0001234",
                      "termsAccepted": true
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Partner updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Partner updated successfully"
                    },
                    "partner": {
                      "$ref": "#/components/schemas/Partner"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID format"
          },
          "404": {
            "description": "Partner not found"
          }
        }
      }
    },
    "/partner/delete/{id}": {
      "delete": {
        "tags": [
          "Partner"
        ],
        "summary": "Delete partner account",
        "description": "Permanently delete a partner account (Admin only)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Partner MongoDB ObjectId",
            "schema": {
              "type": "string",
              "example": "507f1f77bcf86cd799439011"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Partner deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Partner deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID format"
          },
          "404": {
            "description": "Partner not found"
          }
        }
      }
    },
    "/partner/refreshToken": {
      "post": {
        "tags": [
          "Partner"
        ],
        "summary": "Refresh access token",
        "description": "Get new access token using refresh token",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "refreshToken"
                ],
                "properties": {
                  "refreshToken": {
                    "type": "string",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token refreshed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Token refreshed successfully"
                    },
                    "accessToken": {
                      "type": "string"
                    },
                    "refreshToken": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or expired refresh token"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Enter JWT token (accessToken from login/register response)"
      }
    },
    "schemas": {
      "Customer": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "507f1f77bcf86cd799439011"
          },
          "fullName": {
            "type": "string",
            "example": "John Doe"
          },
          "email": {
            "type": "string",
            "example": "john@example.com"
          },
          "phoneNumber": {
            "type": "string",
            "example": "+917397695334"
          },
          "referralCode": {
            "type": "string",
            "example": "XYZ789"
          },
          "referredBy": {
            "type": "string",
            "nullable": true
          },
          "isActive": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CustomerAuthResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "example": "User registered successfully ✅"
          },
          "user": {
            "$ref": "#/components/schemas/Customer"
          },
          "customToken": {
            "type": "string",
            "description": "Firebase custom token for client app"
          },
          "accessToken": {
            "type": "string",
            "description": "JWT access token (1 day validity)"
          },
          "refreshToken": {
            "type": "string",
            "description": "JWT refresh token (7 days validity)"
          },
          "tokenInfo": {
            "type": "object",
            "properties": {
              "customToken": {
                "type": "string"
              },
              "accessToken": {
                "type": "string"
              },
              "refreshToken": {
                "type": "string"
              }
            }
          }
        }
      },
      "Admin": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "fullName": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "superadmin"
            ]
          },
          "isActive": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "AdminAuthResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          },
          "admin": {
            "$ref": "#/components/schemas/Admin"
          },
          "accessToken": {
            "type": "string"
          },
          "refreshToken": {
            "type": "string"
          }
        }
      },
      "Partner": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "fullName": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "phoneNumber": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "Washing Personnel",
              "Delivery Person",
              "Repair Service Technician",
              "Product Seller"
            ]
          },
          "referralCode": {
            "type": "string"
          },
          "isActive": {
            "type": "boolean"
          },
          "isVerified": {
            "type": "boolean"
          },
          "avgRating": {
            "type": "number"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PartnerAuthResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          },
          "partner": {
            "$ref": "#/components/schemas/Partner"
          },
          "customToken": {
            "type": "string"
          },
          "accessToken": {
            "type": "string"
          },
          "refreshToken": {
            "type": "string"
          },
          "nextStep": {
            "type": "string"
          }
        }
      },
      "PartnerProfileUpdate": {
        "type": "object",
        "properties": {
          "address": {
            "type": "object",
            "properties": {
              "street": {
                "type": "string"
              },
              "city": {
                "type": "string"
              },
              "state": {
                "type": "string"
              },
              "postalCode": {
                "type": "string"
              },
              "country": {
                "type": "string"
              },
              "location": {
                "type": "object",
                "properties": {
                  "coordinates": {
                    "type": "array",
                    "items": {
                      "type": "number"
                    },
                    "example": [
                      80.2707,
                      13.0827
                    ]
                  }
                }
              }
            }
          },
          "emergencyContact": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "phone": {
                "type": "string"
              }
            }
          },
          "serviceCategories": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "For Washing Personnel only",
            "example": [
              "Exterior Wash",
              "Interior Cleaning"
            ]
          },
          "vehicleDetails": {
            "type": "object",
            "description": "For Delivery Person & Washing Personnel",
            "properties": {
              "vehicleType": {
                "type": "string",
                "example": "Bike"
              },
              "vehicleModel": {
                "type": "string",
                "example": "Honda Activa"
              },
              "licensePlate": {
                "type": "string",
                "example": "TN01AB1234"
              },
              "registrationCertificate": {
                "type": "string",
                "description": "File path"
              },
              "drivingLicense": {
                "type": "string",
                "description": "File path"
              }
            }
          },
          "shopDetails": {
            "type": "object",
            "description": "For Repair Technician & Product Seller",
            "properties": {
              "shopName": {
                "type": "string",
                "example": "ABC Auto Repair"
              },
              "shopType": {
                "type": "string",
                "example": "Auto Repair"
              },
              "shopAddress": {
                "type": "string"
              },
              "location": {
                "type": "object",
                "properties": {
                  "coordinates": {
                    "type": "array",
                    "items": {
                      "type": "number"
                    },
                    "example": [
                      80.2707,
                      13.0827
                    ]
                  }
                }
              },
              "shopImages": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Array of image URLs"
              }
            }
          },
          "services": {
            "type": "array",
            "description": "For Repair Technician only",
            "items": {
              "type": "object",
              "properties": {
                "serviceImage": {
                  "type": "string"
                },
                "serviceName": {
                  "type": "string",
                  "example": "Engine Repair"
                },
                "description": {
                  "type": "string"
                },
                "minPrice": {
                  "type": "number",
                  "example": 500
                },
                "maxPrice": {
                  "type": "number",
                  "example": 2000
                }
              }
            }
          },
          "yearsOfExperience": {
            "type": "number",
            "description": "For Repair Technician only",
            "example": 5
          },
          "specializations": {
            "type": "array",
            "description": "For Repair Technician only",
            "items": {
              "type": "string"
            },
            "example": [
              "Engine",
              "Brakes",
              "AC"
            ]
          },
          "certifications": {
            "type": "array",
            "description": "For Repair Technician only - file paths",
            "items": {
              "type": "string"
            }
          },
          "idProof": {
            "type": "string",
            "description": "For Repair Technician only - Aadhaar/ID file path"
          },
          "profilePhoto": {
            "type": "string",
            "description": "Profile photo URL"
          },
          "products": {
            "type": "array",
            "description": "For Product Seller only",
            "items": {
              "type": "object",
              "properties": {
                "productImage": {
                  "type": "string"
                },
                "productTitle": {
                  "type": "string",
                  "example": "Engine Oil"
                },
                "productDescription": {
                  "type": "string"
                },
                "unitPrice": {
                  "type": "number",
                  "example": 450
                },
                "stockQuantity": {
                  "type": "number",
                  "example": 50
                }
              }
            }
          },
          "payoutDetails": {
            "type": "object",
            "description": "For all roles",
            "properties": {
              "accountHolderName": {
                "type": "string"
              },
              "accountNumber": {
                "type": "string"
              },
              "ifscCode": {
                "type": "string"
              },
              "idProof": {
                "type": "string",
                "description": "Bank ID proof file path"
              },
              "termsAccepted": {
                "type": "boolean"
              }
            }
          }
        }
      }
    }
  }
}